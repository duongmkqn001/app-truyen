<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√†i kho·∫£n c·ªßa t√¥i - App Truy·ªán</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="css/theme-variables.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="bg-gradient-to-br from-green-50 to-blue-50 min-h-screen">
    <!-- Navigation Bar -->
    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3">
            <div class="flex items-center justify-between">
                <a href="index.html" class="text-2xl font-bold text-green-600">üìö App Truy·ªán</a>
                
                <div class="flex items-center gap-4">
                    <a href="index.html" class="text-gray-700 hover:text-green-600">Trang ch·ªß</a>
                    <a href="authors.html" class="text-gray-700 hover:text-green-600">T√°c gi·∫£</a>
                    <a href="search-by-tag.html" class="text-gray-700 hover:text-green-600">T√¨m theo th·ªÉ lo·∫°i</a>
                    <a href="ranking.html" class="text-gray-700 hover:text-green-600">B·∫£ng x·∫øp h·∫°ng</a>
                    <a href="my-reading-list.html" class="text-gray-700 hover:text-green-600">üìñ Danh s√°ch ƒë·ªçc</a>
                    <a href="upload.html" class="text-gray-700 hover:text-green-600">T·∫£i l√™n</a>

                    <!-- User Menu -->
                    <div id="userMenu"></div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <h1 class="text-3xl font-bold text-gray-800 mb-6">üë§ T√†i kho·∫£n c·ªßa t√¥i</h1>
            
            <!-- Account Information Card -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <h2 class="text-xl font-bold text-gray-800 mb-4">üìã Th√¥ng tin t√†i kho·∫£n</h2>
                
                <div class="space-y-4">
                    <div class="flex items-center justify-between border-b pb-3">
                        <span class="text-gray-600 font-medium">T√™n ng∆∞·ªùi d√πng:</span>
                        <div class="flex items-center gap-2">
                            <span id="profileUsername" class="text-gray-900 font-semibold"></span>
                            <button id="editUsernameBtn" class="text-blue-600 hover:text-blue-800 text-sm" title="Ch·ªânh s·ª≠a t√™n">
                                ‚úèÔ∏è
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between border-b pb-3">
                        <span class="text-gray-600 font-medium">Email:</span>
                        <span id="profileEmail" class="text-gray-900"></span>
                    </div>
                    
                    <div class="flex items-center justify-between border-b pb-3">
                        <span class="text-gray-600 font-medium">Vai tr√≤ hi·ªán t·∫°i:</span>
                        <span id="profileRole"></span>
                    </div>
                    
                    <div class="flex items-center justify-between border-b pb-3">
                        <span class="text-gray-600 font-medium">Tr·∫°ng th√°i:</span>
                        <span id="profileStatus"></span>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <span class="text-gray-600 font-medium">Ng√†y ƒëƒÉng k√Ω:</span>
                        <span id="profileCreatedAt" class="text-gray-900"></span>
                    </div>
                </div>
            </div>

            <!-- Role Upgrade Section -->
            <div id="roleUpgradeSection" class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <h2 class="text-xl font-bold text-gray-800 mb-4">‚¨ÜÔ∏è N√¢ng c·∫•p vai tr√≤</h2>
                
                <!-- Role Explanation -->
                <div class="bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4 mb-4">
                    <h3 class="font-bold text-blue-900 mb-2">C√°c vai tr√≤ trong h·ªá th·ªëng:</h3>
                    <ul class="text-sm text-blue-800 space-y-1">
                        <li>‚Ä¢ <strong>ƒê·ªôc gi·∫£ (reader)</strong>: T√†i kho·∫£n m·ªõi t·ª± ƒë·ªông ƒë∆∞·ª£c vai tr√≤ n√†y, c√≥ th·ªÉ b√¨nh lu·∫≠n, ƒë√°nh gi√°, ƒë·ªÅ c·ª≠ truy·ªán</li>
                        <li>‚Ä¢ <strong>D·ªãch gi·∫£ (translator)</strong>: C√≥ th·ªÉ t·∫£i l√™n truy·ªán, ch·ªânh s·ª≠a truy·ªán c·ªßa m√¨nh (c·∫ßn x√°c minh)</li>
                        <li>‚Ä¢ <strong>Qu·∫£n tr·ªã vi√™n (admin)</strong>: To√†n quy·ªÅn qu·∫£n l√Ω h·ªá th·ªëng</li>
                    </ul>
                </div>

                <!-- Request Form -->
                <div id="requestForm">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Vai tr√≤ mu·ªën n√¢ng c·∫•p:</label>
                        <select id="requestedRole" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                            <option value="">-- Ch·ªçn vai tr√≤ --</option>
                            <option value="translator">D·ªãch gi·∫£ (Translator)</option>
                            <option value="admin">Qu·∫£n tr·ªã vi√™n (Admin)</option>
                        </select>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">L√Ω do y√™u c·∫ßu n√¢ng c·∫•p:</label>
                        <textarea id="requestMessage" rows="4"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                            placeholder="Vui l√≤ng cho bi·∫øt l√Ω do b·∫°n mu·ªën n√¢ng c·∫•p vai tr√≤..."></textarea>
                    </div>

                    <!-- Verification fields (shown for translator requests) -->
                    <div id="verificationFields" class="hidden space-y-4 mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                        <div class="text-sm text-yellow-800 mb-3">
                            <strong>‚ö†Ô∏è Y√™u c·∫ßu x√°c minh cho D·ªãch gi·∫£:</strong>
                            <p class="mt-1">Vui l√≤ng cung c·∫•p link website/Wattpad n∆°i b·∫°n ƒëƒÉng truy·ªán d·ªãch v√† ·∫£nh ch·ª©ng minh b·∫°n s·ªü h·ªØu t√†i kho·∫£n ƒë√≥.</p>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Link Website/Wattpad: <span class="text-red-500">*</span>
                            </label>
                            <input type="url" id="websiteUrl"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                placeholder="https://www.wattpad.com/user/yourname ho·∫∑c https://yourwebsite.com">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Link ·∫£nh ch·ª©ng minh (Google Drive - c√¥ng khai): <span class="text-red-500">*</span>
                            </label>
                            <input type="url" id="proofImageUrl"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                placeholder="https://drive.google.com/... (·∫£nh ch·ª•p m√†n h√¨nh ch·ª©ng minh quy·ªÅn s·ªü h·ªØu)">
                            <p class="text-xs text-gray-500 mt-1">
                                üí° G·ª£i √Ω: Ch·ª•p m√†n h√¨nh trang c√†i ƒë·∫∑t t√†i kho·∫£n ho·∫∑c trang profile c·ªßa b·∫°n tr√™n website/Wattpad, upload l√™n Google Drive v√† chia s·∫ª c√¥ng khai
                            </p>
                        </div>
                    </div>

                    <button id="submitRequestBtn"
                        class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors">
                        G·ª≠i y√™u c·∫ßu n√¢ng c·∫•p
                    </button>
                </div>
            </div>

            <!-- Request History -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-xl font-bold text-gray-800 mb-4">üìú L·ªãch s·ª≠ y√™u c·∫ßu</h2>
                
                <div id="requestsContainer">
                    <div class="text-center py-8 text-gray-500">
                        ƒêang t·∫£i...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg hidden transition-all">
        <span id="toastMessage"></span>
    </div>

    <!-- Edit Username Modal -->
    <div id="editUsernameModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-900">Ch·ªânh s·ª≠a t√™n ng∆∞·ªùi d√πng</h3>
                <button id="closeEditUsernameModal" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
            </div>

            <form id="editUsernameForm">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">T√™n ng∆∞·ªùi d√πng m·ªõi:</label>
                    <input type="text" id="newUsername"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                        placeholder="Nh·∫≠p t√™n ng∆∞·ªùi d√πng m·ªõi"
                        required
                        minlength="3"
                        maxlength="50">
                    <p class="text-xs text-gray-500 mt-1">T√™n ng∆∞·ªùi d√πng ph·∫£i c√≥ t·ª´ 3-50 k√Ω t·ª±</p>
                </div>

                <div class="flex gap-3">
                    <button type="submit" class="flex-1 bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors">
                        L∆∞u thay ƒë·ªïi
                    </button>
                    <button type="button" id="cancelEditUsername" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-4 rounded-lg transition-colors">
                        H·ªßy
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/theme-manager.js"></script>
    <script src="js/config.js"></script>
    <script src="js/database.js"></script>
    <script src="js/components.js"></script>
    <script src="js/profile.js"></script>
</body>
</html>

